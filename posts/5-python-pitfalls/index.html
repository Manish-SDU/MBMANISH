<!DOCTYPE html><html lang="en">
<!-- Mirrored from www.python-engineer.com/posts/5-python-pitfalls/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Sep 2022 12:01:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset="UTF-8"/><meta name="og:site_name" content="Python Engineer"/><link rel="canonical" href="https://python-engineer.com/posts/5-python-pitfalls"/><meta name="twitter:url" content="https://python-engineer.com/posts/5-python-pitfalls"/><meta name="og:url" content="https://python-engineer.com/posts/5-python-pitfalls"/><title>5 Python Pitfalls that can save you HOURS of debugging! | Python Engineer</title><meta name="twitter:title" content="5 Python Pitfalls that can save you HOURS of debugging! | Python Engineer"/><meta name="og:title" content="5 Python Pitfalls that can save you HOURS of debugging! | Python Engineer"/><meta name="description" content="Knowing this can save you HOURS of debugging! (5 Python Pitfalls)"/><meta name="twitter:description" content="Knowing this can save you HOURS of debugging! (5 Python Pitfalls)"/><meta name="og:description" content="Knowing this can save you HOURS of debugging! (5 Python Pitfalls)"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="../../images/favicon.png" type="image/png"/><link rel="alternate" href="../../feed.rss" type="application/rss+xml" title="Subscribe to Python Engineer"/><meta name="twitter:image" content="../../images/icon.png"/><meta name="og:image" content="../../images/icon.png"/><script async defer data-domain="python-engineer.com" src="../../../plausible.io/js/plausible.js"></script></head><body class="item"><header><div class="header-promotion"><p><div class="wrapper"><p><a href="https://pythonengineer.pallet.com/" target="_blank">üêç Find Python and ML Jobs! üêç</a></p></div></p></div><div class="wrapper"><nav><ul><li class="selected"><a href="../index.html">POSTS</a></li><li><a href="../../courses/index.html">COURSES</a></li><li><a href="../../about/index.html">ABOUT</a></li></ul></nav><a href="../../index.html"><div class="hero-container"><img class="header-image-small" src="../../images/pat_face_bg.webp" alt="Patrick Loeber"/><div class="hero-text-container justify-center"><p>Become a</p><h1 class="colorized-text ">Python Engineer</h1><p class="mobile-hide">Come and learn about</p><ul class="mobile-hide"><li><a class="variant-a" href="../../tags/python/index.html">Python</a></li><li id="regular-li">and</li><li><a class="variant-b" href="../../tags/machine-learning/index.html">Machine Learning</a></li></ul></div></div></a></div></header><article class="page wrapper post-page"><h1 class="blog-header">5 Python Pitfalls that can save you HOURS of debugging!</h1><div class="metadata"><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li></ul><span class="post-date">15 Sep 2021, by </span><a class="author-link-post" href="../../authors/patrick/index.html">Patrick Loeber</a></div><div class="video-player"><iframe frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="true" src="https://www.youtube-nocookie.com/embed/8zbXyd_tA9A"></iframe></div><div class="content page-content m-top"><p>Being aware of these 5 Python Pitfalls can save you hours of debugging effort.</p><p>Credits go to the <a href="https://github.com/satwikkansal/wtfpython">wtfpython repository</a>!</p><h2>1. String concatenation without "+"</h2><p>Two strings are implicitly concatenated if they are written after each other, even without using the "+" operator. This can be relevant, e.g., if we have a list of strings and <strong>forget one comma</strong>.</p><p>Notice the missing comma in the list:</p><pre><code><div class="highlight"><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span>
           <span class="s2">&quot;two&quot;</span>
           <span class="s2">&quot;three&quot;</span><span class="p">,</span>
           <span class="s2">&quot;four&quot;</span><span class="p">,</span>
           <span class="s2">&quot;five&quot;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="mi">4</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">my_list</span>
<span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;twothree&quot;</span><span class="p">,</span> <span class="s2">&quot;four&quot;</span><span class="p">,</span> <span class="s2">&quot;five&quot;</span><span class="p">]</span>
</div></code></pre><p>Instead of raising a <code>SyntaxError</code>, these <strong>strings are simply combined</strong> and we get unexpected results!</p><p><strong>Implicit string concatenation</strong>:</p><pre><code><div class="highlight"><span></span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span> <span class="s2">&quot;world&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">helloworld</span>
</div></code></pre><h2>2. Conditional expression and multiple assignments</h2><p>In Python we can assign multiple variables in one line. Also, we can use a conditional expression instead of the longer if-else statement.</p><p><strong>If both features are combined, we have to be really careful</strong>!</p><pre><code><div class="highlight"><span></span><span class="n">condition</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">condition</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</div></code></pre><p>This is what we expected, but what happened if the condition is True?</p><pre><code><div class="highlight"><span></span><span class="n">condition</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">condition</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</div></code></pre><p>Now we get three values, what is happening???</p><p>Explanation: We tried to use parenthesis to improve the readability, but now we <strong>messed up the evaluation order</strong>! Now x will be <em>(0, 1)</em> if the condition is True, and <em>None</em> otherwise. And y is always <em>None</em>.</p><h4>The Fix:</h4><p>Either <strong>use consistent parenthesis</strong> for both cases:</p><pre><code><div class="highlight"><span></span><span class="n">condition</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">condition</span> <span class="k">else</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</div></code></pre><p>Or in this case I prefer the normal <strong>if-else statement</strong>, which is less error-prone:</p><pre><code><div class="highlight"><span></span><span class="k">if</span> <span class="n">condition</span><span class="p">:</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</div></code></pre><h2>3. Tuple creation with one element</h2><p>Let's create tuples with different numbers of items, and inspect the items. As you know, tuples are created by using parenthesis <code>()</code>:</p><pre><code><div class="highlight"><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
<span class="c1"># Output:</span>
<span class="n">one</span>
<span class="n">two</span>
</div></code></pre><p>This is what we expected for two elements.</p><p>Now create an empty tuple:</p><pre><code><div class="highlight"><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
<span class="c1"># Output:</span>
   
</div></code></pre><p>No output, also what we expected.</p><p>Now create a tuple with one element:</p><pre><code><div class="highlight"><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">)</span> <span class="c1"># This is a string, not a tuple!!!</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
<span class="c1"># Output:</span>
<span class="n">o</span>
<span class="n">n</span>
<span class="n">e</span>
</div></code></pre><p>We print three items with one character each! What is happening???</p><p>Explanation: If we create a tuple with one element with parenthesis, the used syntax does <strong>not create a tuple but a string</strong> object!</p><h4>The Fix:</h4><p>A <strong>comma inside the parenthesis MUST be used</strong> to create a tuple with one element:</p><pre><code><div class="highlight"><span></span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">,)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
<span class="c1"># Output:</span>
<span class="n">one</span>
</div></code></pre><h4>Another Pitfall</h4><p>One could have the idea to use the explicit tuple constructor by using the <code>tuple()</code> function. This will indeed create a tuple object, but when passing a string to this function, it creates a tuple with one character for each item:</p><pre><code><div class="highlight"><span></span><span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">)</span>
<span class="c1"># (&#39;o&#39;, &#39;n&#39;, &#39;e&#39;)</span>
</div></code></pre><p>I have a <strong>detailed tutorial about tuples</strong> <a href="../../courses/advancedpython/02-tuples/index.html">here</a>.</p><h2>4. <code>assert</code> statement with parenthesis</h2><p>The <a href="https://docs.python.org/3/reference/simple_stmts.html#assert">assert statement</a> in Python is a convenient way to insert debugging assertions into a program:</p><p>If the condition is True, nothing happens, but if the condition is False, an AssertionError is raised (only in debug mode). This can be used to catch bugs when when we always expect a certain condition to be True.</p><p>The assert statement can take an optional Error message, separated by a comma:</p><pre><code><div class="highlight"><span></span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span>
<span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;javascript&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;Both languages are different&quot;</span><span class="p">)</span>
<span class="c1"># No AssertionError is raised!!! But at least you get a warning:</span>
<span class="o">&lt;</span><span class="n">stdin</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span> <span class="ne">SyntaxWarning</span><span class="p">:</span> <span class="n">assertion</span> <span class="ow">is</span> <span class="n">always</span> <span class="n">true</span><span class="p">,</span> <span class="n">perhaps</span> <span class="n">remove</span> <span class="n">parentheses</span><span class="err">?</span>
</div></code></pre><p>Why is no AssertionError raised when the two variables are obviously not equal?</p><p>Explanation: The <strong>assert statement should NOT be used with parenthesis</strong>! Otherwise the whole statement is evaluated as one tuple with a Boolean and a string, and a non-empty tuple is always True.</p><p>Syntax according to the official docs is without parenthesis:</p><pre><code><div class="highlight"><span></span><span class="k">assert</span> <span class="n">expression</span> <span class="p">[</span><span class="s2">&quot;,&quot;</span> <span class="n">errormsg</span><span class="p">]</span>
</div></code></pre><h4>The Fix:</h4><pre><code><div class="highlight"><span></span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span>
<span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;javascript&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;Both languages are different&quot;</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="n">Both</span> <span class="n">languages</span> <span class="n">are</span> <span class="n">different</span>
</div></code></pre><h2>5. In-place update methods of Lists/Dictionaries</h2><p>This might be obvious, but sometimes we still forget it and then get unexpected <em>None</em> values.</p><p>Certain methods for Lists like <code>append()</code> and <code>sort()</code> modify the List <strong>in-place</strong> and return <em>None</em>! So when we assign the result of this operation back to the original variable, the object is <em>None</em>:</p><pre><code><div class="highlight"><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="n">my_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">my_list</span> <span class="o">=</span> <span class="n">my_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">my_list</span>
<span class="kc">None</span>
</div></code></pre><h4>The Fix:</h4><p>Simply apply these methods without reassigning it to the variable:</p><pre><code><div class="highlight"><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">my_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">my_list</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</div></code></pre><p>Same holds true for Dictionaries and the <code>update()</code> function!</p></div><ul class="actions"><li><a class="youtube-button" href="https://www.youtube.com/channel/UCbXgNpp0jedKWcQiULLbDTA?sub_confirmation=1" target="_blank" rel="nofollow">Subscribe</a></li><li><a class="twitter-button" href="https://twitter.com/intent/tweet?via=python_engineer&amp;text=5%20Python%20Pitfalls%20that%20can%20save%20you%20HOURS%20of%20debugging!&amp;url=https://python-engineer.com/posts/5-python-pitfalls" rel="nofollow" target="_blank">Share</a></li></ul><div class="affiliate-container"><div><h2>FREE VS Code / PyCharm Extensions I Use</h2><p>‚úÖ Write cleaner code with Sourcery, instant refactoring suggestions: <a href="https://sourcery.ai/?utm_source=youtube&amp;utm_campaign=pythonengineer" target="_blank">Link *</a></p><p class="affiliate-note">* This is an affiliate link. By clicking on it you will not have any additional costs, instead you will support me and my project. Thank you! üôè</p></div></div><a class="sponsor-container" href="../../newsletter/index.html" rel="nofollow"><img class="main" src="../../images/numpyhandbook.webp" alt="newsletter"/><div><h2>FREE NumPy Handbook</h2><p>Learn NumPy with this eBook! It covers code examples for all essential functions. Get it for free together with monthly Python tips and news.</p><button class="pill-button">I Want This</button></div></a><div><div><a class="section-header pad-top" href="../../courses/index.html"><h2>Check out my Courses</h2></a><ul class="item-list grid"><li><article class="post-card"><a href="../../courses/tensorflowbeginner/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/tfcourse.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li><li class="variant-f"><a href="../../tags/tensorflow/index.html">TensorFlow</a></li><li class="variant-c"><a href="../../tags/deep-learning/index.html">Deep Learning</a></li></ul><a class="post-link" href="../../courses/tensorflowbeginner/index.html"><h1 class="description">TensorFlow 2 Beginner</h1><p>Learn all the necessary basics to get started with TensorFlow 2 and Keras.</p></a></article></li><li><article class="post-card"><a href="../../courses/pytorchbeginner/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/pytorchcourse.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li><li class="variant-c"><a href="../../tags/pytorch/index.html">PyTorch</a></li><li class="variant-c"><a href="../../tags/deep-learning/index.html">Deep Learning</a></li></ul><a class="post-link" href="../../courses/pytorchbeginner/index.html"><h1 class="description">PyTorch Beginner</h1><p>Learn all the necessary basics to get started with this deep learning framework.</p></a></article></li><li><article class="post-card"><a href="../../courses/mlfromscratch/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/mlfromscratch.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li><li class="variant-b"><a href="../../tags/machine-learning/index.html">Machine Learning</a></li><li class="variant-d"><a href="../../tags/numpy/index.html">numpy</a></li></ul><a class="post-link" href="../../courses/mlfromscratch/index.html"><h1 class="description">ML From Scratch</h1><p>Implement popular Machine Learning algorithms from scratch using only built-in Python modules and numpy.</p></a></article></li><li><article class="post-card"><a href="../../courses/advancedpython/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/advancedpythoncourse.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li></ul><a class="post-link" href="../../courses/advancedpython/index.html"><h1 class="description">Advanced Python</h1><p>Advanced Python Tutorials. It covers topics like collections, decorators, generators, multithreading, logging, and much more.</p></a></article></li></ul></div></div></article><footer><div class="wrapper patreon-footer"><h1>Patreon</h1><p>Become a Patron and get exclusive content! Get access to ML From Scratch notebooks, join a private Discord channel, get priority response, and more!</p><div class="gold-patrons"><h3>Special thanks to my Gold Patreons:</h3><p>Tonja J R</p><p>Daniel And Andy</p><p>Sergei</p></div><p>And of course thanks to every other member! I really appreciate the support!</p><a href="https://www.patreon.com/patrickloeber" target="_blank">Find Out More</a></div><div class="wrapper"><p>Copyright ¬© Python Engineer 2022.</p><p>Generated using <a href="https://github.com/johnsundell/publish" target="_blank">Publish</a>.</p><ul class="footer-links"><li><a class="youtube-button youtube-icon" href="https://www.youtube.com/channel/UCbXgNpp0jedKWcQiULLbDTA" target="_blank">YouTube</a></li><li><a class="social-button twitter-button" href="https://twitter.com/python_engineer" target="_blank">Twitter</a></li><li><a class="social-button github-button" href="https://github.com/python-engineer" target="_blank">GitHub</a></li><li><a class="social-button discord-button" href="https://discord.gg/FHMg9tKFSN" target="_blank">Discord</a></li><li><a class="footer-button" href="../../feed.rss">RSS</a></li><li><a class="footer-button" href="../../about/index.html">Contact</a></li><li><a class="footer-button" href="../../legal-notice/index.html">Legal Notice</a></li><li><a class="footer-button" href="../../privacy-policy/index.html">Privacy Policy</a></li></ul></div></footer></body>
<!-- Mirrored from www.python-engineer.com/posts/5-python-pitfalls/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Sep 2022 12:01:49 GMT -->
</html>