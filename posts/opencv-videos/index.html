<!DOCTYPE html><html lang="en">
<!-- Mirrored from www.python-engineer.com/posts/opencv-videos/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Sep 2022 12:01:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset="UTF-8"/><meta name="og:site_name" content="Python Engineer"/><link rel="canonical" href="https://python-engineer.com/posts/opencv-videos"/><meta name="twitter:url" content="https://python-engineer.com/posts/opencv-videos"/><meta name="og:url" content="https://python-engineer.com/posts/opencv-videos"/><title>Working with Videos in OpenCV using Python | Python Engineer</title><meta name="twitter:title" content="Working with Videos in OpenCV using Python | Python Engineer"/><meta name="og:title" content="Working with Videos in OpenCV using Python | Python Engineer"/><meta name="description" content="Basic operations with videos in OpenCV using Python."/><meta name="twitter:description" content="Basic operations with videos in OpenCV using Python."/><meta name="og:description" content="Basic operations with videos in OpenCV using Python."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="../../images/favicon.png" type="image/png"/><link rel="alternate" href="../../feed.rss" type="application/rss+xml" title="Subscribe to Python Engineer"/><meta name="twitter:image" content="../../images/icon.png"/><meta name="og:image" content="../../images/icon.png"/><script async defer data-domain="python-engineer.com" src="../../../plausible.io/js/plausible.js"></script></head><body class="item"><header><div class="header-promotion"><p><div class="wrapper"><p><a href="https://pythonengineer.pallet.com/" target="_blank">üêç Find Python and ML Jobs! üêç</a></p></div></p></div><div class="wrapper"><nav><ul><li class="selected"><a href="../index.html">POSTS</a></li><li><a href="../../courses/index.html">COURSES</a></li><li><a href="../../about/index.html">ABOUT</a></li></ul></nav><a href="../../index.html"><div class="hero-container"><img class="header-image-small" src="../../images/pat_face_bg.webp" alt="Patrick Loeber"/><div class="hero-text-container justify-center"><p>Become a</p><h1 class="colorized-text ">Python Engineer</h1><p class="mobile-hide">Come and learn about</p><ul class="mobile-hide"><li><a class="variant-a" href="../../tags/python/index.html">Python</a></li><li id="regular-li">and</li><li><a class="variant-b" href="../../tags/machine-learning/index.html">Machine Learning</a></li></ul></div></div></a></div></header><article class="page wrapper post-page"><h1 class="blog-header">Working with Videos in OpenCV using Python</h1><div class="metadata"><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li><li class="variant-b"><a href="../../tags/computer-vision/index.html">Computer Vision</a></li></ul><span class="post-date">13 Feb 2022, by </span><a class="author-link-post" href="../../authors/shweta/index.html">Shweta Goyal</a></div><div class="content page-content"><p>OpenCV has been used in various video-related tasks like in drones, robots, car navigation and control, surveillance cameras, video tracking, embedded systems like Aurdino and Raspberry Pi, etc.</p><p>A video is a sequence of frames and each frame is an image. It is displayed at a speed of frames per second. In this article, you will learn how to capture a video, display a frame and save a video.<br><br>This is the video taken from <a href="https://www.kaggle.com/kmader/drone-videos?select=Bluemlisalphutte+Flyover.mp4">Kaggle</a>.</p><h2>Reading a Video</h2><p>There are two ways you can read a video either from a file or from a webcam. OpenCV provides a <em>VideoCapture</em> object to perform this operation. Let‚Äôs see the syntax:</p><pre><code><div class="highlight"><span></span><span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</div></code></pre><p>Here, you can give the name of the file if it is in the same directory where your program is or you can provide the full path if your file is in a different directory.<br><br>Let‚Äôs see an example by reading a video from a file:</p><pre><code><div class="highlight"><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># Reading a video from file</span>
<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="s1">&#39;Flyover.mp4&#39;</span><span class="p">)</span> 

<span class="k">while</span><span class="p">(</span><span class="n">cap</span><span class="o">.</span><span class="n">isOpened</span><span class="p">()):</span>
    
    <span class="c1"># capture frame-by-frame</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>

        <span class="c1"># Display a frame</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Frame&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">):</span>
            <span class="k">break</span>

<span class="c1"># Release the capture object</span>
<span class="n">cap</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="c1"># Destroy all windows</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>
</div></code></pre><p>After you have captured the video, you can use the <code>isOpened()</code> method to check if your video is successfully opened. Otherwise you will get an error message. It returns a boolean value (True/False) to confirm if the provided video stream is valid or not.</p><p>OpenCV also provides a method through which you can access some properties of the video, you can use the <code>cap.get(propId)</code> method.</p><p>It consists of a single argument:</p><ul><li><em>propId:</em> It is the property of the video. It contains an enumerated list of options, you can access the full list from <a href="https://docs.opencv.org/2.4/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-get">here</a>. You can provide numeric values or you can pass the full name. Here, the number denotes the property of the video.</li></ul><p>If you want to modify the existing value, you can use the <code>cap.set(propId, value)</code> method.</p><p>It consists of two arguments:</p><ul><li><em>propId:</em> It indicates the property of the video.</li><li><em>value:</em> It indicates the value that you want to modify.</li></ul><p>For example, if you want to check the width and height of the frame you can use <code>cap.get(3)</code> and <code>cap.get(4)</code>. It will give you by default 640x480. If you want the value 320x240, you can modify it by using <code>ret = cap.set(3, 320)</code> and <code>ret = cap.set(4, 240)</code>.</p><p>In the above code, the <code>cap.read()</code> method is used to capture each frame from a file by creating a loop and reading one frame at a time. It returns a tuple where the first element indicates a boolean value if it is true that means the frame is captured correctly and the second element is the video frame.</p><p>You can use the <code>imshow()</code> method to display a frame in a window. You can also use the <code>waitKey()</code> method to pause the video frame and it will wait until you press the key. In the above code, it will wait until you press the <code>q</code> key and then you exit the loop.</p><p>You can also use a webcam by specifying the device index which is just the number of the camera. If you pass 0 then it is for the first camera, 1 is for the second camera, and so on. Let‚Äôs see the syntax:</p><p><code>cv2.VideoCapture(0)</code></p><p>The rest of the code is the same, you just have to replace the video file name with your device index.</p><h2>Writing a video</h2><p>OpenCV has a <em>VideoWriter</em> object that helps to save the video. You can write the file in any format once you provide the right arguments. Let‚Äôs see the syntax:</p><pre><code><div class="highlight"><span></span><span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="n">Filename</span><span class="p">,</span> <span class="n">Fourcc_code</span><span class="p">,</span> <span class="n">FrameRate</span><span class="p">,</span> <span class="n">FrameSize</span><span class="p">)</span>
</div></code></pre><p>It consists of four arguments:</p><ul><li><em>Filename:</em> Name of the output file</li><li><em>Fourcc_code:</em> This is a 4-byte code that specifies the video codec. It is platform-dependent. You can access the full list at <a href="https://www.fourcc.org/codecs.php">fourcc.org</a>. It is used to compress frames. FourCC code is written as <code>cv2.VideoWriter_fourcc(‚ÄòX‚Äô, ‚ÄòV‚Äô, ‚ÄòI‚Äô, ‚ÄòD‚Äô)</code> or <code>cv2.VideoWriter_fourcc(*‚ÄôXVID‚Äô)</code> for XVID.</li><li><em>FrameRate:</em> Frame rate of created video stream which is in fps (frame per second).</li><li><em>FrameSize:</em> It is the size of the video frames which is width and height.</li></ul><p>Let‚Äôs see the implementation by capturing a video from a file and writing it in a output file:</p><pre><code><div class="highlight"><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># Reading a video from file</span>
<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="s1">&#39;Flyover.mp4&#39;</span><span class="p">)</span>

<span class="c1"># Initialize VideoWriter object</span>
<span class="n">fourcc</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter_fourcc</span><span class="p">(</span><span class="o">*</span><span class="s1">&#39;XVID&#39;</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="s1">&#39;Output.mp4&#39;</span><span class="p">,</span> <span class="n">fourcc</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="p">(</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">720</span><span class="p">))</span> 

<span class="k">while</span><span class="p">(</span><span class="n">cap</span><span class="o">.</span><span class="n">isOpened</span><span class="p">()):</span>
    
    <span class="c1"># capture frame-by-frame</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        
        <span class="c1"># Write the frame to output file</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

        <span class="c1"># Display a frame</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;Frame&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">):</span>
            <span class="k">break</span>

<span class="c1"># Release the capture objects</span>
<span class="n">cap</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
<span class="n">out</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="c1"># Destroy all windows</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>
</div></code></pre><h2>End Notes</h2><p>OpenCV comes with many tools and inbuilt functions that will make our tasks easier, whether it will be images or videos. This article covered two such functions: <strong>cv2.VideoCapture()</strong> and <strong>cv2.VideoWriter()</strong>. The goal of this article will give you a start and now you can try this on another video or try to perform this using webcam.</p></div><ul class="actions"><li><a class="youtube-button" href="https://www.youtube.com/channel/UCbXgNpp0jedKWcQiULLbDTA?sub_confirmation=1" target="_blank" rel="nofollow">Subscribe</a></li><li><a class="twitter-button" href="https://twitter.com/intent/tweet?via=python_engineer&amp;text=Working%20with%20Videos%20in%20OpenCV%20using%20Python&amp;url=https://python-engineer.com/posts/opencv-videos" rel="nofollow" target="_blank">Share</a></li></ul><div class="affiliate-container"><div><h2>FREE VS Code / PyCharm Extensions I Use</h2><p>‚úÖ Write cleaner code with Sourcery, instant refactoring suggestions: <a href="https://sourcery.ai/?utm_source=youtube&amp;utm_campaign=pythonengineer" target="_blank">Link *</a></p><p class="affiliate-note">* This is an affiliate link. By clicking on it you will not have any additional costs, instead you will support me and my project. Thank you! üôè</p></div></div><a class="sponsor-container" href="../../newsletter/index.html" rel="nofollow"><img class="main" src="../../images/numpyhandbook.webp" alt="newsletter"/><div><h2>FREE NumPy Handbook</h2><p>Learn NumPy with this eBook! It covers code examples for all essential functions. Get it for free together with monthly Python tips and news.</p><button class="pill-button">I Want This</button></div></a><div><div><a class="section-header pad-top" href="../../courses/index.html"><h2>Check out my Courses</h2></a><ul class="item-list grid"><li><article class="post-card"><a href="../../courses/tensorflowbeginner/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/tfcourse.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li><li class="variant-f"><a href="../../tags/tensorflow/index.html">TensorFlow</a></li><li class="variant-c"><a href="../../tags/deep-learning/index.html">Deep Learning</a></li></ul><a class="post-link" href="../../courses/tensorflowbeginner/index.html"><h1 class="description">TensorFlow 2 Beginner</h1><p>Learn all the necessary basics to get started with TensorFlow 2 and Keras.</p></a></article></li><li><article class="post-card"><a href="../../courses/pytorchbeginner/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/pytorchcourse.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li><li class="variant-c"><a href="../../tags/pytorch/index.html">PyTorch</a></li><li class="variant-c"><a href="../../tags/deep-learning/index.html">Deep Learning</a></li></ul><a class="post-link" href="../../courses/pytorchbeginner/index.html"><h1 class="description">PyTorch Beginner</h1><p>Learn all the necessary basics to get started with this deep learning framework.</p></a></article></li><li><article class="post-card"><a href="../../courses/mlfromscratch/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/mlfromscratch.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li><li class="variant-b"><a href="../../tags/machine-learning/index.html">Machine Learning</a></li><li class="variant-d"><a href="../../tags/numpy/index.html">numpy</a></li></ul><a class="post-link" href="../../courses/mlfromscratch/index.html"><h1 class="description">ML From Scratch</h1><p>Implement popular Machine Learning algorithms from scratch using only built-in Python modules and numpy.</p></a></article></li><li><article class="post-card"><a href="../../courses/advancedpython/index.html"><img class="post-thumb" alt="Thumbnail image of the post." src="../../images/titles/advancedpythoncourse.webp"/></a><ul class="tags"><li class="variant-a"><a href="../../tags/python/index.html">Python</a></li></ul><a class="post-link" href="../../courses/advancedpython/index.html"><h1 class="description">Advanced Python</h1><p>Advanced Python Tutorials. It covers topics like collections, decorators, generators, multithreading, logging, and much more.</p></a></article></li></ul></div></div></article><footer><div class="wrapper patreon-footer"><h1>Patreon</h1><p>Become a Patron and get exclusive content! Get access to ML From Scratch notebooks, join a private Discord channel, get priority response, and more!</p><div class="gold-patrons"><h3>Special thanks to my Gold Patreons:</h3><p>Tonja J R</p><p>Daniel And Andy</p><p>Sergei</p></div><p>And of course thanks to every other member! I really appreciate the support!</p><a href="https://www.patreon.com/patrickloeber" target="_blank">Find Out More</a></div><div class="wrapper"><p>Copyright ¬© Python Engineer 2022.</p><p>Generated using <a href="https://github.com/johnsundell/publish" target="_blank">Publish</a>.</p><ul class="footer-links"><li><a class="youtube-button youtube-icon" href="https://www.youtube.com/channel/UCbXgNpp0jedKWcQiULLbDTA" target="_blank">YouTube</a></li><li><a class="social-button twitter-button" href="https://twitter.com/python_engineer" target="_blank">Twitter</a></li><li><a class="social-button github-button" href="https://github.com/python-engineer" target="_blank">GitHub</a></li><li><a class="social-button discord-button" href="https://discord.gg/FHMg9tKFSN" target="_blank">Discord</a></li><li><a class="footer-button" href="../../feed.rss">RSS</a></li><li><a class="footer-button" href="../../about/index.html">Contact</a></li><li><a class="footer-button" href="../../legal-notice/index.html">Legal Notice</a></li><li><a class="footer-button" href="../../privacy-policy/index.html">Privacy Policy</a></li></ul></div></footer></body>
<!-- Mirrored from www.python-engineer.com/posts/opencv-videos/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Sep 2022 12:01:40 GMT -->
</html>